## Поэтапная установка и аплоад данных

Эти инструкции вам пригодятся, если вы собираетесь регулярно обновлять карты и заливать их на сервер.

Проект сконфигурирован таким образом, чтобы можно было обновлять файлы движка и конфигурационные файлы проектов независимо друг от друга.

Итак,

### Клонируем репозиторий: 

`git clone https://github.com/KarelWintersky/kwLeafletMaps.git`

### Настраиваем FTP-доступ

В каталоге `.deploy` создаем файл `account.json` следующего содержания:
```
{
    "host"      : "",
    "port"      : 21,
    "username"  : "",
    "password"  : "",
	"uploadpath": "/wintersky.rpg/public_html/leafletmaps"
}
```
Где
- `host` -- FTP-хост (только адрес или URL, **без** префикса `ftp://`!);
- `post` -- FTP-порт (оставьте 21 по умолчанию если не знаете, какой у вас);
- `username` -- логин к FTP-серверу
- `password` -- пароль к FTP-серверу
- `uploadpath` -- путь к корню проекта на FTP-сервере (от пользовательского корня) 

### Создаем конфигурационный файл

В папке `backend/` лежит пример конфигурационного файла `config.php.example`. Переименовываем его в `config.php` и правим значения констант. 

Файл `config.php` не включён в репозиторий. Таким образом, вы сможете обновить файлы движка, не трогая уже имеющиеся установки. 

**Важно:** Файл `config.php` нужен обязательно, но он может быть и пустым. 

### Устанавливаем модули node.js

`npm install`
`npm install -g grunt-cli`

### Аплоад 

Выложить и движок, и карты на сервер можно одной командой:
`grunt --gruntfile upload_all.js`

Но я рекомендую загружать по частям (тем более, что после обновления карт на локальном хосте их можно загружать на
сервер отдельно)

#### Аплоад файлов движка

`grunt --gruntfile upload_engine.js`

#### Аплоад карт

`grunt --gruntfile upload_maps.js`


----
P.S. 
Конечно же для работы вам потребуется:
- [GIT](https://git-scm.com/)
- [Node.JS](https://nodejs.org/en/)
**Важно:** При установке node.js в windows есть одна тонкость - после установки нужно закрыть и снова открыть терминал. То же самое может потребоваться после выполнения команды `npm install`. На некоторых (старых) системах может не заработать `grunt`. Как починить? Ищите в сети.    
----
© Karel Wintersky, Dec 2015